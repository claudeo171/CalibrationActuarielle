@using OnlineCalibrator.SharedPages.Component
@using Tavenem.Blazor.IndexedDB


@code {
    [Inject(Key = "saveData")] private IndexedDb MyDatabase { get; set; } = default!;
    public async Task<byte[]> GetData(string name)
    {
        var store = MyDatabase["valueStore"];
        var data = await store.GetItemAsync<SavedData>(name);
        if (data?.Value != null)
        {
            return Convert.FromBase64String(data?.Value);
        }
        return null;
    }
    public async Task SaveData(string name, byte[] values)
    {
        var store = MyDatabase["valueStore"];
        try
        {
            bool rst = await store.RemoveItemAsync(name);
            var item = new SavedData { Id = name, Value = Convert.ToBase64String(values) };
            await store.StoreItemAsync(item);
        }
        catch(Exception e)
        {

        }
    }
    public async Task RemoveData(string name)
    {
        var store = MyDatabase["valueStore"];
        try
        {
            bool rst = await store.RemoveItemAsync(name);
        }
        catch (Exception e)
        {

        }
    }

}
